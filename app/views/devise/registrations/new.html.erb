<%# app/views/devise/registrations/new.html.erb - Redesigned %>

<%# Reuse the welcome styles explicitly if not globally included %>
<% content_for :head do %>
  <%= stylesheet_link_tag "welcome", "data-turbo-track": "reload" %>
<% end %>

<%# The Canvas: Linked to the controller for the animation %>
<canvas id="particle-canvas" data-controller="welcome-background"></canvas>

<div id="welcome-screen">
  <div class="welcome-card">

    <%# The welcome-header content was removed as requested. %>

    <div class="welcome-form-wrapper">
      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), data: { turbo: false }) do |f| %>

        <%# Error messages will appear at the top of the form if any %>
        <%= render "devise/shared/error_messages", resource: resource %>

        <div class="form-group">
          <%= f.email_field :email,
                            autofocus: true,
                            autocomplete: "email",
                            placeholder: "Email",
                            required: true,
                            class: "welcome-input" %>
        </div>

        <div class="form-group">
          <%= f.password_field :password,
                               autocomplete: "new-password",
                               placeholder: "Password (#{@minimum_password_length} char min)",
                               required: true,
                               class: "welcome-input" %>
        </div>

        <div class="form-group">
          <%= f.password_field :password_confirmation,
                               autocomplete: "new-password",
                               placeholder: "Confirm Password",
                               required: true,
                               class: "welcome-input" %>
        </div>

        <div class="welcome-buttons-container">
          <%# Sign Up (Primary Action - Solid Button) %>
          <%= f.submit "SIGN UP", class: "welcome-button solid-button" %>

          <%# Back (Secondary/Back - Outline Button) %>
          <%= link_to "BACK", root_path, class: "welcome-button outline-button" %>
        </div>

      <% end %>
    </div>

  </div>
</div>